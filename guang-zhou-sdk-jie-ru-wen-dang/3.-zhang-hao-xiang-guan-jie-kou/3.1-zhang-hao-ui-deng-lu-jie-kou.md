# 3.1 账号UI登录接口

API接口调用须知： 在调用API接口前请务必正确引入\#import &lt;R2SDKUI/R2SDKUI.h&gt;

{% hint style="info" %}
请确保完成了”2.集成开发配置“中2.1 ~2.4所有配置,再调用登录接口。
{% endhint %}

#### 功能说明：

 研发方按照需求在游戏需要登录的时候调用该接口。该登录接口包含了多种第三方登录和游客登录方式，同时接口会自动记录最近一次登录的账号，并下次自动完成该账号的登录操作。研发方无需关注接口内部实现细节，只需要按照需求调用并处理接口回调数据即可.

#### 接口形式：

```objectivec
-(void)loginWithUIFromViewController:(UIViewController*)vc onCompletionHandler:(R2LoginHandler)handler;
```

#### 参数说明：

 vc:当前活动的UIViewController（必须）。

 handler：接口回调 \(必须\)。 

#### 接口示例：

```objectivec
[[R2SDKUIApi sharedInstance] loginWithUIFromViewController:self onCompletionHandler:^(int code, NSString *msg, R2LoginResponse *result) {
//登录成功
if (code == R2_LOGIN_SUCCESS && result) {
//取得帐号的 r2 uid，便于游戏自身定位玩家
NSString *r2UserId = result.r2Uid;
//取得相关验证登录合法性的数据,若不详请咨询SDK服务器端技术人员
NSString *loginTimestamp = result.timestamp;
NSString *sign = result.sign;
NSLog(@"current r2 uid = %@",r2UserId);
}else{
//登录失败
NSLog(@"failed to login，code:%d,error:%@",code,msg);
}
}];
```



