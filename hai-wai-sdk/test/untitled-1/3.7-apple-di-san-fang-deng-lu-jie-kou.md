# 3.7 Apple第三方登录接口

#### 功能说明：

 研发方可以直接调用该接口来完成Apple ID登录，用户登录并授权成功后，会自动绑定R2UID。接口回调数据中,包括玩家Apple账号的用户ID，以及对应的R2UID,是否绑定Apple字段isBoundToApple。只有玩家在做Apple ID登录时将邮箱账号授权，才会返回玩家Apple账号的个人昵称和电子邮箱。

#### 接口形式：

```objectivec
-(void)signInFromViewController:(UIViewController*)viewController onCompletionHandler:(R2AppleApiCompletionHandler)handler;
```

#### 参数说明：

 viewController:当前活动的UIViewController （必须）

 handler：接口回调 \(必须\)， loginResponse为玩家登录数据，包含r2uid等。

accoutInfo为包含Apple账号信息。isBoundToApple字段用来判断是否绑定Apple账号。

#### 接口示例：

```objectivec
 [[R2AppleSignHelper sharedInstance]signInFromViewController:self onCompletionHandler:^(int code, NSString * _Nonnull msg, R2LoginResponse * _Nonnull loginResponse, NSDictionary * _Nonnull accoutInfo) {
      if (code == 0) {
         //取得帐号的 r2 uid，便于游戏自身定位玩家
          NSString *r2UserId = loginResponse.r2Uid;
          self.r2uid = r2UserId;
          //取得相关验证登录合法性的数据,若不详请咨询SDK服务器端技术人员
          NSString *loginTimestamp = loginResponse.timestamp;
          NSString *sign = loginResponse.sign;
          NSLog(@"current r2 uid = %@,apple accout %@",r2UserId,accoutInfo);
          NSLog(@"send [r2uid=%@,timestamp=%@,sign=%@] to the game server for the verification",r2UserId,loginTimestamp,sign);
//是否绑定苹果账号
          BOOL isBindToApple = loginResponse.isBoundToApple;
          }else{
          //登录失败
          NSLog(@"failed to login，code:%d,error:%@",code,msg);
          }
    }];
```

